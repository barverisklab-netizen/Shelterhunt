# ShelterSearch Release Process

This project follows [semantic versioning](https://semver.org/) in the form `MAJOR.MINOR.PATCH`. Use the steps below to ship a new Minor or Major release and to keep the published version in sync with the onboarding screen badge.

---

## Prerequisites

- Node.js 20+
- A clean working tree (commit or stash local changes before starting)
- GitHub permissions to create releases

---

## Step 1 — Decide The Version

| Release type | When to use it | Example increment |
|--------------|----------------|-------------------|
| **Minor**    | Backwards-compatible enhancements, new features | `1.4.2` → `1.5.0` |
| **Major**    | Breaking changes, large redesigns | `1.5.0` → `2.0.0` |

Patch releases (e.g., `1.5.1`) follow the same process with a smaller version bump.

---

## Step 2 — Update Version Metadata

1. **Set the new version number**  
   ```bash
   npm version minor   # or `major`
   ```
   This command updates `package.json`, creates a git tag, and ensures the onboarding screen picks up the correct version via `packageInfo.version`.

2. **Review the diff** (verify only version fields changed).

3. **Commit & push** the version bump if you skipped the automatic commit (`npm version --no-git-tag-version` users only).

---

## Step 3 — Build And Smoke Test

```bash
npm install
npm run build
npm run start
```

> Confirm the onboarding screen shows the new version. Run through a quick functional check before publishing.

---

## Step 4 — Publish The Release

1. Push your release branch/tag to GitHub:
   ```bash
   git push origin main --tags
   ```

2. Create a new GitHub Release:
   - **Tag**: use the tag generated by `npm version` (e.g., `v1.5.0`)
   - **Release title**: match the version (e.g., `v1.5.0 – Map Enhancements`)
   - **Release notes**: summarize changes and highlight breaking changes if it is a major release.

3. Hit **Publish release**. The workflow `.github/workflows/release.yml` builds the project automatically and uploads the production bundle artifact.

---

## Step 5 — Deploy

Download the `sheltersearch-build` artifact from the release workflow run and deploy it to your hosting provider (Render). If Render auto-deploys from releases, verify the new version is live and that the onboarding badge matches the release number.

---

## Rollback

If something goes wrong:

1. Revert the offending commit(s) or fix forward.
2. Bump the patch version (e.g., `npm version patch`) and repeat the release steps.
